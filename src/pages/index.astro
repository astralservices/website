---
import {
  CheckCircleIcon,
  CurrencyDollarIcon,
  ViewGridAddIcon,
  AdjustmentsIcon,
  BadgeCheckIcon,
} from "@heroicons/react/solid/esm/index.js";
import Layout from "../components/Layout.astro";
import CTA from "../components/CTA.astro";

const { result: stats }: { result: any[] } = await fetch(
  "https://api.astralapp.io/api/v1/stats"
).then((res) => {
  return res.json();
});

const parseStat = (stat: any): any => {
  if (stat.key === "uptime") {
    stat.value = `${stat.value}%`;
  }
  return stat;
};

const ctaReasons = [
  "No coding required",
  "Professional branded bots",
  "Perfect for all communities",
];

const reasons = [
  {
    icon: CurrencyDollarIcon,
    title: "Free forever",
    description:
      "We don't charge for our basic bot service. You can use it as long as you want.",
  },
  {
    icon: ViewGridAddIcon,
    title: "Easy integrations",
    description:
      "Astral's integrations connect to various services, allowing you to create a bot that does anything.",
  },
  {
    icon: AdjustmentsIcon,
    title: "Super customizable",
    description:
      "Enable the modules you need, disable the ones you don't. With our many modules, you'll never be without a command.",
  },
  {
    icon: BadgeCheckIcon,
    title: "Granular permissions",
    description:
      "Astral's permissions system allows you to give your users the exact permissions they need.",
  },
];

const plans = [
  {
    name: "Basic",
    priceMonthly: 0,
    priceYearly: 0,
    features: ["Branded Discord Bot", "Up to 10 workspace members"],
  },
  {
    name: "Premium",
    priceMonthly: 5,
    priceYearly: 50,
    features: [
      "Previous features",
      "Up to 25 workspace members",
      "Astral Sites (Soon ™️)",
    ],
  },
  {
    name: "Enterprise",
    priceMonthly: 10,
    priceYearly: 100,
    features: ["Previous features", "Unlimited workspace members"],
  },
];
---

<Layout>
  <div
    class="px-16 pt-12 pb-6 md:px-48 md:pt-48 md:pb-36 animate-fade-in-up motion-reduce:animate-none"
  >
    <div class="grid grid-cols-5 gap-y-6">
      <h1 class="grid col-span-full grid-cols-1">
        <span class="text-4xl font-black text-white md:text-7xl"
          >Discord bots
        </span>
        <span class="text-4xl font-black lowercase text-astral md:text-7xl">
          <span
            class="bg-gradient-to-r from-astral-600 to-astral
          bg-[length:0px_6px]
          bg-left-bottom
          bg-no-repeat
          transition-[background-size]
          motion-reduce:bg-[length:100%_6px]
          motion-reduce:transition-none
          duration-500
          motion-safe:hover:bg-[length:100%_6px]"
          >
            Made easy
          </span>
        </span>
      </h1>
      <p class="text-xl font-bold text-white col-span-full">
        Create a branded bot in less than five minutes with
        <!-- -->
        <span
          class="font-black bg-gradient-to-r from-astral-600 to-astral
        bg-[length:0px_6px]
        bg-left-bottom
        bg-no-repeat
        transition-[background-size]
        motion-reduce:bg-[length:100%_6px]
        motion-reduce:transition-none
        duration-200
        motion-safe:hover:bg-[length:100%_6px]"
          >Astral
        </span>
      </p>
      <a
        href="https://dash.astralapp.io"
        class="px-12 py-2.5 text-white text-center lg:col-span-2 md:col-span-3 col-span-full rounded-lg bg-astral hover:bg-astral-600 transition-colors duration-100 font-bold"
        >Get Started Today
      </a>
      <ul class="col-span-full">
        {ctaReasons.map((r) => (
          <li class="flex items-center space-x-2 align-middle group">
            <CheckCircleIcon className="w-5 h-5 text-white motion-safe:group-hover:text-astral motion-safe:transition-colors duration-500" />
            <span class="text-xl font-bold text-white">
              <span
                class="bg-gradient-to-r from-astral-600 to-astral
        bg-[length:0px_3px]
        bg-left-bottom
        bg-no-repeat
        transition-[background-size]
        motion-reduce:transition-none
        duration-500
        motion-safe:group-hover:bg-[length:100%_3px]"
              >
                {r}
              </span>
            </span>
          </li>
        ))}
      </ul>
    </div>
  </div>

  <div
    class="grid justify-center w-full grid-cols-1 gap-4 px-16 py-6 md:px-24 md:py-12 animate-fade-in-up"
  >
    <h2 class="text-4xl text-center text-white font-black">Why Astral?</h2>
    <ul class="grid grid-cols-1 gap-8 md:grid-cols-4">
      {reasons.map((reason) => (
        <li class="self-stretch flex-none flex-grow order-1 p-5">
          <span class="flex justify-center w-full text-center">
            <reason.icon className="w-16 h-16 text-white" />
          </span>
          <h3 class="text-xl text-center text-white font-bold">
            {reason.title}
          </h3>

          <p class="text-lg text-center text-white font-medium">
            {reason.description}
          </p>
        </li>
      ))}
    </ul>
  </div>

  <div
    class="grid justify-center w-full grid-cols-1 gap-4 px-16 py-6 md:px-24 md:py-16"
  >
    <h2 class="text-4xl text-center text-white font-black">By The Numbers</h2>
    <ul class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:grid-cols-5">
      {stats.map((stat, i) => (
        <li class="grid items-center justify-center p-8 bg-not-quite-black">
          <p class="text-3xl text-center text-white font-bold">
            {parseStat(stat).value}
          </p>
          <h3 class="text-2xl text-center text-white font-medium">
            {parseStat(stat).key}
          </h3>
        </li>
      ))}
    </ul>

    {stats && stats.length > 0 && (
      <p class="w-full text-center text-white font-bold">
        Last updated:
        <time datetime={new Date(stats[0].updated_at).toLocaleString()}>
          {new Date(stats[0].updated_at).toLocaleString()}
        </time>
        UTC
      </p>
    )}
  </div>

  <!-- <Globe data={regions} client:only />
  <noscript>
    <div
      class="grid justify-center w-full grid-cols-1 gap-4 px-16 py-6 md:px-24 md:py-16"
    >
      <h2 class="text-4xl text-center text-white font-black">
        Regions Around The World
      </h2>
      <p class="text-lg text-center text-white font-medium">
        You must enable JavaScript to view the Region Globe.
      </p>
    </div>
  </noscript> -->

  <div
    class="grid justify-center w-full grid-cols-1 gap-4 px-8 py-6 md:px-24 md:py-16"
  >
    <h2 class="text-4xl text-center text-white font-black">Pricing</h2>
    <ul class="grid grid-cols-1 gap-8 mt-16 md:grid-cols-3">
      {plans.map((plan) => (
        <li class="grid items-center p-12 bg-white rounded-md gap-y-5">
          <h3 class="text-2xl text-black font-bold">{plan.name}</h3>
          <div class="space-y-1">
            <h1 class="lg:text-6xl text-4xl text-black font-black">
              {new Intl.NumberFormat("en-US", {
                currency: "USD",
                style: "currency",
              }).format(plan.priceMonthly)}
            </h1>
            <p class="text-xl text-black font-semibold">/ mo</p>
          </div>
          <ul class="grid grid-cols-1 gap-2 mt-8 mb-16">
            {plan.features.map((feature) => (
              <li class="flex items-center space-x-2 align-middle group">
                <CheckCircleIcon className="w-5 h-5 text-black motion-safe:group-hover:text-astral motion-safe:transition-colors duration-500" />
                <span class="text-sm font-bold text-black">
                  <span
                    class="bg-gradient-to-r from-astral-600 to-astral
        bg-[length:0px_2px]
        bg-left-bottom
        bg-no-repeat
        transition-[background-size]
        motion-reduce:transition-none
        duration-500
        motion-safe:group-hover:bg-[length:100%_2px]"
                  >
                    {feature}
                  </span>
                </span>
              </li>
            ))}
          </ul>
          {plan.priceMonthly > 0 ? (
            <a
            class="w-full px-4 py-2 text-center text-white cursor-not-allowed opacity-75 rounded-md bg-astral duration-200 transition-colors font-bold"
          >
            Soon!
          </a>
          ) : (
          <a
            class="w-full px-4 py-2 text-center text-white rounded-md bg-astral hover:bg-astral-600 duration-200 transition-colors font-bold"
            href="https://dash.astralapp.io/new"
          >
            Get Started
          </a>
          )}
        </li>
      ))}
    </ul>
    <p class="text-sm font-bold text-center text-white">Subject to change.</p>
  </div>

  <CTA />
</Layout>
